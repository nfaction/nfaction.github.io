---
title: How to become an SSH master
categories:
  - linux
tags:
  - linux
  - ssh
  - nix
  - mac
---

## Overview

What is SSH? Secure shell (SSH) allows users to securely connect to a remote computer by way of an encrypted tunnel. SSH is extremely powerful and allows one to manage hundreds if not thousands of machines with ease in a very secure way.

SSH also has a mechanism for password-less authentication through keys. Key-based authentication is far superior to standard passwords, and saves you time by not having to enter your password every time you login. Keys are comprised of two parts: a public key, and a private key. The public key is copied to any machine you want to securely connect to, and your private key acts as a key to a lock, where the lock is your public key. Your private key should not be shared or copied to any other machine, since this is your “key to the kingdom”.

This might look daunting, but I promise you that time was taken to ensure that little work will have to be done on your part. This process could be scripted, but it is better to do this manually so that you understand the process and how SSH is setup, in case there is a problem in the future.

## Generate RSA SSH Keys

1. Create SSH configuration directory by running the following command:

    ``` bash
    mkdir -p ~/.ssh;chmod 700 ~/.ssh;cd ~/.ssh
    ```

2. Generate private and public SSH keys

    ``` bash
    ssh-keygen -t rsa -b 4096
    ```

3. Hit `enter` or `return` to choose the default key-name and location.[^1]
4. Enter a passphrase for your key.[^2]
5. An ascii key image, which represents your unique RSA key.
6. Both `id_rsa` and `id_rsa.pub` files (private and public keys) should now exist in your `~/.ssh` folder. The `id_rsa.pub` can be copied to any machine you want to tunnel to (Instructions on how to do this below).[^3]

## Transfer Public Key to a remote host

1. Transfer key

    ``` bash
    ssh <your-username>@<remote-host> "mkdir -p .ssh; \
      chmod 0700 .ssh"
    cat ~/.ssh/id_rsa.pub | ssh \
      <your-username>@<remote-host> \
      "cat >> ~/.ssh/authorized_keys"
    ```
2. Test password-less `ssh`

    ``` bash
    ssh <your-username>@<remote-host>
    ```

If you didn't get a password prompt, you're good to go!

---

Footnotes:

[^1]: If you already have a generated key, feel free to change the default key-name. To do this, enter a name such as 'id_rsa_my_key', then hit enter. If you do choose to use a different key-name, you will have to change all the following commands to reflect this change.
[^2]: An SSH key passphrase is a secondary form of security that gives you a little time when your keys are stolen. If your RSA key has a strong passphrase, it might take your attacker a few hours to guess by brute force. That extra time should be enough to log in to any computers you have an account on, delete your old key from the .ssh/authorized_keys file, and add a new key.
[^3]: Do not share your private key with anyone! Your private key should remain on your computer, and never be transferred. It is easy enough to generate a new key, so there is no need to copy your private key. So, one might ask oneself, if I am only supposed to copy my public key to machines
